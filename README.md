# doutu-bot
斗图专用机器人！边挂机边怼人:ok_hand:

WeChat(チャットアプリ)のJSONプロトコルに基づき､受信したメッセージに対し、言語処理を行い、シーンに応じた絵文字(スタンプ)を自動的に返事するロボットである｡テスト週間等､時間ない時にチャットの自動返信として使えるのではないかと思い､開発しました｡  

仕組みは以下:  
チャットロボットのAPIを利用し､受信したメッセージに対する返答の文章をAPIより作成する｡この文章についてHanLPで言語処理を行う｡具体的には､チャットロボットの返答文章からキーワードを抽出する｡そのキーワードを絵文字(スタンプ)検索のAPIで､検索で得た結果を送信相手に送り返す｡
文字でない､データを受信した時は､チャットロボットのAPIが利用できないのでassets/default-emos下にある､絵文字(スタンプ)を返す｡  

例えば:  
1. "何をしてるの?"を友人Aから受信
2. "何をしてるの?"をチャットロボットAPIに送信
3. チャットロボットAPIから"ご飯を食べてるよ｡"を受信
4. 言語処理でキーワード抽出｡["ご飯","食べてる"]
5. ["ご飯","食べてる"]を絵文字(スタンプ)検索のAPIで検索
6. 検索結果のスタンプを友人Aへ送信



# 原理
**api，技术：**
 - **[wechat-api](https://github.com/biezhi/wechat-api)** : Java的微信接口，啥都能干
 - **[HanLP](https://github.com/hankcs/HanLP)**：中文分词处理
 - **[图灵机器人API](http://www.tuling123.com/)** ：自动回复机器人
 - **[茉莉机器人API](http://www.itpk.cn/)** ：自动回复机器人
 - **[斗图啦接口](https://www.doutula.com/apidoc)** ： 表情包搜索接口  

把机器人的回答用HanLP进行处理，找出关键词。通过斗图啦接口获取合适的表情，用表情包自动回复发送方。  
目前对文字以外的类型暂不支持，随机返回assets/default-emos目录下的表情

# 怎么用？
运行Main.java中的main方法，扫码登录就OK
# 能用来干嘛？

### 可以这样 ！:see_no_evil:

![](doc/screenshot.jpg)

### 其实是这样！:see_no_evil:

![](doc/console.png)

目前来看,能搜索到合适表情的概率较低
# 最后!:eyes::eyes:
![](doc/donation.jpg)

